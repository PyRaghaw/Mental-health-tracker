<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindMate - Your Emotional Support Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4A90E2;
            --secondary: #FF9A76;
            --background: #F7F9FC;
            --text: #2C3E50;
            --crisis: #E74C3C;
            --success: #27AE60;
        }

        .dark {
            --primary: #5DA8FF;
            --secondary: #FFB896;
            --background: #1A1D29;
            --text: #E0E6ED;
            --crisis: #FF6B6B;
            --success: #58D68D;
        }

        * {
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text);
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .chat-container {
            height: calc(100vh - 140px);
            overflow-y: auto;
        }

        .user-message {
            background: var(--primary);
            color: white;
            border-radius: 18px 18px 4px 18px;
            margin-left: auto;
            max-width: 70%;
        }

        .ai-message {
            background: #E8F4FD;
            color: var(--text);
            border-radius: 18px 18px 18px 4px;
            margin-right: auto;
            max-width: 70%;
        }

        .dark .ai-message {
            background: #2D3748;
        }

        .typing-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #9CA3AF;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .breathing-circle {
            animation: breathe 4s infinite ease-in-out;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .streak-glow {
            box-shadow: 0 0 20px rgba(255, 154, 118, 0.5);
        }
    </style>
</head>
<body class="bg-[var(--background)] text-[var(--text)]">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 shadow-sm py-4 px-6 flex justify-between items-center">
        <div class="flex items-center space-x-2">
            <div class="w-10 h-10 bg-[var(--primary)] rounded-full flex items-center justify-center">
                <i class="fas fa-brain text-white"></i>
            </div>
            <span class="text-xl font-bold">MindMate</span>
        </div>
        
        <div class="flex items-center space-x-4">
            <button id="theme-toggle" class="p-2 rounded-full bg-gray-100 dark:bg-gray-700">
                <i class="fas fa-moon dark:fa-sun"></i>
            </button>
            
            <div class="hidden md:flex space-x-6">
                <a href="#home" class="hover:text-[var(--primary)]">Home</a>
                <a href="#chat" class="hover:text-[var(--primary)]">Chat</a>
                <a href="#dashboard" class="hover:text-[var(--primary)]">Dashboard</a>
                <a href="#resources" class="hover:text-[var(--primary)]">Resources</a>
            </div>
            
            <button id="auth-btn" class="bg-[var(--primary)] text-white px-4 py-2 rounded-full hover:bg-blue-600 transition-colors">
                Sign In
            </button>
            
            <button id="mobile-menu" class="md:hidden p-2">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobile-nav" class="hidden md:hidden bg-white dark:bg-gray-800 shadow-lg py-4 px-6">
        <a href="#home" class="block py-2 hover:text-[var(--primary)]">Home</a>
        <a href="#chat" class="block py-2 hover:text-[var(--primary)]">Chat</a>
        <a href="#dashboard" class="block py-2 hover:text-[var(--primary)]">Dashboard</a>
        <a href="#resources" class="block py-2 hover:text-[var(--primary)]">Resources</a>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Homepage -->
        <section id="home" class="min-h-screen gradient-bg text-white relative overflow-hidden">
            <!-- Animated Particles -->
            <div id="particles-container" class="absolute inset-0"></div>
            
            <div class="container mx-auto px-6 py-20 relative z-10">
                <div class="max-w-4xl mx-auto text-center">
                    <h1 class="text-5xl md:text-6xl font-bold mb-6 fade-in">
                        You're Not Alone<br>
                        <span class="text-[var(--secondary)]">Talk to Someone Who Cares</span>
                    </h1>
                    
                    <p class="text-xl mb-10 opacity-90">
                        MindMate is your 24/7 emotionally intelligent companion. Share your feelings, 
                        track your mood, and find support in a completely private, judgment-free space.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row justify-center gap-4 mb-16">
                        <button id="start-chat" class="bg-[var(--secondary)] text-gray-900 px-8 py-4 rounded-full text-lg font-semibold hover:bg-orange-400 transition-colors">
                            Start Talking Now <i class="ml-2 fas fa-comments"></i>
                        </button>
                        <button class="bg-white bg-opacity-20 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-opacity-30 transition-colors">
                            Learn More
                        </button>
                    </div>
                    
                    <!-- Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20">
                        <div class="bg-white bg-opacity-10 p-6 rounded-2xl backdrop-blur-sm">
                            <div class="text-3xl font-bold mb-2">50,000+</div>
                            <div class="opacity-80">Conversations</div>
                        </div>
                        <div class="bg-white bg-opacity-10 p-6 rounded-2xl backdrop-blur-sm">
                            <div class="text-3xl font-bold mb-2">24/7</div>
                            <div class="opacity-80">Available</div>
                        </div>
                        <div class="bg-white bg-opacity-10 p-6 rounded-2xl backdrop-blur-sm">
                            <div class="text-3xl font-bold mb-2">100%</div>
                            <div class="opacity-80">Anonymous</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="py-20 bg-white dark:bg-gray-800">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center mb-16">Why People Choose MindMate</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-lock text-2xl text-[var(--primary)]"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Complete Privacy</h3>
                        <p class="text-gray-600 dark:text-gray-300">Your conversations are encrypted and never shared</p>
                    </div>
                    
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-heart text-2xl text-[var(--success)]"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Emotionally Available</h3>
                        <p class="text-gray-600 dark:text-gray-300">AI that understands feelings and provides genuine support</p>
                    </div>
                    
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-globe text-2xl text-purple-500"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Multilingual</h3>
                        <p class="text-gray-600 dark:text-gray-300">Chat in English, Hinglish, or Hindi - whatever feels natural</p>
                    </div>
                    
                    <div class="text-center p-6">
                        <div class="w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-shield-alt text-2xl text-[var(--crisis)]"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Crisis Detection</h3>
                        <p class="text-gray-600 dark:text-gray-300">Immediate help and resources when you need them most</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Interface -->
        <section id="chat" class="min-h-screen bg-gray-50 dark:bg-gray-900 py-10 hidden">
            <div class="container mx-auto px-4 max-w-4xl">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden">
                    <!-- Chat Header -->
                    <div class="bg-[var(--primary)] text-white p-4 flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div>
                                <h2 class="font-bold">MindMate Assistant</h2>
                                <p class="text-blue-100 text-sm">Online â€¢ Ready to listen</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button id="new-chat" class="p-2 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button id="menu-btn" class="p-2 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Chat Messages -->
                    <div id="chat-messages" class="chat-container p-4 bg-gray-50 dark:bg-gray-700">
                        <!-- Initial message -->
                        <div class="ai-message p-4 mb-4 slide-up">
                            <div class="flex items-start space-x-2">
                                <div class="w-8 h-8 bg-[var(--primary)] rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-robot text-white text-sm"></i>
                                </div>
                                <div>
                                    <p class="font-medium text-[var(--primary)]">MindMate</p>
                                    <p>Hello there! I'm MindMate, your emotional support companion. I'm here to listen, understand, and help you through whatever you're feeling. You can talk to me about anything - no judgment, just support. How are you doing today?</p>
                                    <p class="text-xs text-gray-500 mt-2">Just now</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Reply Suggestions -->
                    <div id="quick-replies" class="p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600">
                        <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">Quick replies:</p>
                        <div class="flex flex-wrap gap-2">
                            <button class="quick-reply bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-full text-sm transition-colors">
                                I've been feeling stressed
                            </button>
                            <button class="quick-reply bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-full text-sm transition-colors">
                                I feel lonely sometimes
                            </button>
                            <button class="quick-reply bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-full text-sm transition-colors">
                                I had a great day today!
                            </button>
                        </div>
                    </div>
                    
                    <!-- Typing Indicator -->
                    <div id="typing-indicator" class="hidden p-4 bg-gray-50 dark:bg-gray-700">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-[var(--primary)] rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div class="bg-gray-200 dark:bg-gray-600 rounded-lg px-4 py-3">
                                <div class="flex space-x-1">
                                    <div class="typing-indicator"></div>
                                    <div class="typing-indicator"></div>
                                    <div class="typing-indicator"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Input Area -->
                    <div class="p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-600">
                        <div class="flex space-x-2">
                            <button id="voice-btn" class="p-3 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <input 
                                type="text" 
                                id="user-input" 
                                placeholder="Type your message here..." 
                                class="flex-1 border border-gray-300 dark:border-gray-600 rounded-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[var(--primary)] bg-white dark:bg-gray-700"
                                autocomplete="off"
                            >
                            <button id="send-btn" class="bg-[var(--primary)] text-white px-6 py-3 rounded-full hover:bg-blue-600 transition-colors">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="mt-2 text-xs text-gray-500 dark:text-gray-400 flex justify-between">
                            <div>
                                <i class="fas fa-shield-alt mr-1"></i>
                                Your conversations are private and secure
                            </div>
                            <div id="sentiment-indicator" class="hidden">
                                Detected sentiment: <span id="sentiment-value" class="font-medium"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard -->
        <section id="dashboard" class="min-h-screen bg-white dark:bg-gray-800 py-10 hidden">
            <div class="container mx-auto px-4">
                <h1 class="text-3xl font-bold mb-8">Your MindMate Dashboard</h1>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Left Column -->
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Streak Card -->
                        <div class="bg-gradient-to-r from-[var(--primary)] to-[var(--secondary)] text-white p-6 rounded-2xl">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h2 class="text-2xl font-bold mb-2">7-Day Streak! ðŸ”¥</h2>
                                    <p class="opacity-90">You've checked in for 7 days straight. Keep going!</p>
                                </div>
                                <div class="text-4xl font-bold streak-glow p-4 rounded-full bg-white bg-opacity-20">
                                    7
                                </div>
                            </div>
                        </div>
                        
                        <!-- Mood Chart -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-2xl">
                            <h2 class="text-xl font-semibold mb-4">Your Mood Trends</h2>
                            <div class="h-64">
                                <canvas id="mood-chart"></canvas>
                            </div>
                        </div>
                        
                        <!-- Recent Conversations -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-2xl">
                            <h2 class="text-xl font-semibold mb-4">Recent Conversations</h2>
                            <div class="space-y-4">
                                <div class="p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-[var(--primary)] transition-colors cursor-pointer">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-medium">Feeling overwhelmed with work</h3>
                                        <span class="text-sm text-gray-500">Today</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400 truncate">I've been having a really tough time at work lately. The deadlines are piling up and I feel like I can't keep up with everything...</p>
                                </div>
                                <div class="p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-[var(--primary)] transition-colors cursor-pointer">
                                    <div class="flex justify-between items-center mb-2">
                                        <h3 class="font-medium">Relationship concerns</h3>
                                        <span class="text-sm text-gray-500">2 days ago</span>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400 truncate">My partner and I have been arguing a lot recently. I'm not sure how to communicate better without it turning into a fight...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column -->
                    <div class="space-y-8">
                        <!-- Profile Card -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-2xl">
                            <div class="text-center">
                                <div class="w-20 h-20 bg-[var(--primary)] rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-white text-2xl font-bold">U</span>
                                </div>
                                <h2 class="text-xl font-semibold">Anonymous User</h2>
                                <p class="text-gray-600 dark:text-gray-400">Member since June 2024</p>
                                
                                <div class="mt-6 space-y-3">
                                    <div class="flex justify-between">
                                        <span>Conversations</span>
                                        <span class="font-semibold">24</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Current Streak</span>
                                        <span class="font-semibold text-[var(--success)]">7 days</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>Avg. Mood</span>
                                        <span class="font-semibold">Positive</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Weekly Insights -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-2xl">
                            <h2 class="text-xl font-semibold mb-4">Weekly Insights</h2>
                            <div class="space-y-3">
                                <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                    <p class="text-sm">You tend to feel more positive after talking about your achievements.</p>
                                </div>
                                <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                    <p class="text-sm">Mornings are your most reflective time. Consider journaling then.</p>
                                </div>
                                <div class="p-3 bg-white dark:bg-gray-800 rounded-lg">
                                    <p class="text-sm">You've shown great progress in managing work-related stress.</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-2xl">
                            <h2 class="text-xl font-semibold mb-4">Quick Actions</h2>
                            <div class="space-y-3">
                                <button class="w-full bg-[var(--primary)] text-white py-3 rounded-lg hover:bg-blue-600 transition-colors">
                                    Start New Conversation
                                </button>
                                <button class="w-full bg-gray-200 dark:bg-gray-600 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                                    Export Chat History
                                </button>
                                <button class="w-full bg-gray-200 dark:bg-gray-600 py-3 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors">
                                    Breathing Exercise
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Crisis Mode Overlay -->
        <div id="crisis-overlay" class="fixed inset-0 bg-[var(--crisis)] bg-opacity-95 z-50 hidden flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8 text-center">
                <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-exclamation-triangle text-3xl text-[var(--crisis)]"></i>
                </div>
                
                <h2 class="text-3xl font-bold mb-4">We're Here For You</h2>
                <p class="text-lg mb-8">
                    We've detected that you might be going through a difficult time. 
                    Your safety is our top priority. Please reach out to these resources immediately:
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h3 class="font-semibold mb-2">India</h3>
                        <p class="text-lg">AASRA: <strong>91-22-27546669</strong></p>
                        <p class="text-lg">Vandrevala: <strong>9999 666 555</strong></p>
                    </div>
                    <div class="bg-red-50 p-4 rounded-lg">
                        <h3 class="font-semibold mb-2">International</h3>
                        <p class="text-lg">USA: <strong>988</strong></p>
                        <p class="text-lg">UK: <strong>116 123</strong></p>
                    </div>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button class="bg-[var(--crisis)] text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors">
                        <i class="fas fa-phone mr-2"></i> Call Now
                    </button>
                    <button id="safe-btn" class="bg-gray-200 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors">
                        I'm Safe Now
                    </button>
                </div>
                
                <!-- Breathing Exercise -->
                <div class="mt-8 pt-8 border-t border-gray-200">
                    <h3 class="font-semibold mb-4">Feeling Anxious? Try This Breathing Exercise</h3>
                    <div class="flex items-center justify-center space-x-4">
                        <div class="breathing-circle w-16 h-16 bg-[var(--primary)] rounded-full flex items-center justify-center text-white">
                            Breathe
                        </div>
                        <div class="text-left">
                            <p class="text-sm">Breathe in for 4 seconds</p>
                            <p class="text-sm">Hold for 4 seconds</p>
                            <p class="text-sm">Breathe out for 6 seconds</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // State Management
        const state = {
            currentPage: 'home',
            isDarkMode: false,
            chatHistory: [],
            userProfile: {
                name: 'Anonymous User',
                streak: 7,
                conversations: 24,
                avgMood: 'positive'
            }
        };

        // DOM Elements
        const elements = {
            themeToggle: document.getElementById('theme-toggle'),
            mobileMenu: document.getElementById('mobile-menu'),
            mobileNav: document.getElementById('mobile-nav'),
            startChat: document.getElementById('start-chat'),
            chatSection: document.getElementById('chat'),
            homeSection: document.getElementById('home'),
            dashboardSection: document.getElementById('dashboard'),
            chatMessages: document.getElementById('chat-messages'),
            userInput: document.getElementById('user-input'),
            sendBtn: document.getElementById('send-btn'),
            typingIndicator: document.getElementById('typing-indicator'),
            quickReplies: document.getElementById('quick-replies'),
            sentimentIndicator: document.getElementById('sentiment-indicator'),
            sentimentValue: document.getElementById('sentiment-value'),
            crisisOverlay: document.getElementById('crisis-overlay'),
            safeBtn: document.getElementById('safe-btn'),
            newChat: document.getElementById('new-chat'),
            particlesContainer: document.getElementById('particles-container')
        };

        // Initialize the application
        function init() {
            setupEventListeners();
            createParticles();
            initializeMoodChart();
            loadChatHistory();
        }

        // Event Listeners
        function setupEventListeners() {
            // Theme toggle
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // Mobile menu
            elements.mobileMenu.addEventListener('click', () => {
                elements.mobileNav.classList.toggle('hidden');
            });
            
            // Navigation
            elements.startChat.addEventListener('click', () => showPage('chat'));
            
            // Chat functionality
            elements.sendBtn.addEventListener('click', sendMessage);
            elements.userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Quick replies
            document.querySelectorAll('.quick-reply').forEach(button => {
                button.addEventListener('click', (e) => {
                    elements.userInput.value = e.target.textContent;
                    sendMessage();
                });
            });
            
            // Crisis mode
            elements.safeBtn.addEventListener('click', () => {
                elements.crisisOverlay.classList.add('hidden');
            });
            
            // New chat
            elements.newChat.addEventListener('click', startNewChat);
            
            // Voice input (placeholder)
            document.getElementById('voice-btn').addEventListener('click', () => {
                alert('Voice input will be available in the next update!');
            });
        }

        // Theme Management
        function toggleTheme() {
            state.isDarkMode = !state.isDarkMode;
            document.body.classList.toggle('dark', state.isDarkMode);
            
            const icon = elements.themeToggle.querySelector('i');
            if (state.isDarkMode) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
            
            // Save preference to localStorage
            localStorage.setItem('mindmate-theme', state.isDarkMode ? 'dark' : 'light');
        }

        // Page Navigation
        function showPage(page) {
            // Hide all pages
            elements.homeSection.classList.add('hidden');
            elements.chatSection.classList.add('hidden');
            elements.dashboardSection.classList.add('hidden');
            
            // Show selected page
            if (page === 'home') {
                elements.homeSection.classList.remove('hidden');
            } else if (page === 'chat') {
                elements.chatSection.classList.remove('hidden');
                elements.userInput.focus();
            } else if (page === 'dashboard') {
                elements.dashboardSection.classList.remove('hidden');
            }
            
            state.currentPage = page;
        }

        // Chat Functions
        function sendMessage() {
            const message = elements.userInput.value.trim();
            if (!message) return;
            
            // Add user message to chat
            addMessage(message, 'user');
            
            // Clear input
            elements.userInput.value = '';
            
            // Check for crisis keywords
            if (detectCrisis(message)) {
                showCrisisMode();
                return;
            }
            
            // Show typing indicator
            elements.typingIndicator.classList.remove('hidden');
            elements.chatMessages.scrollTop = elements.chatMessages.scrollHeight;
            
            // Simulate AI response after delay
            setTimeout(() => {
                elements.typingIndicator.classList.add('hidden');
                const response = generateAIResponse(message);
                addMessage(response, 'ai');
                
                // Update sentiment indicator
                updateSentimentIndicator(message);
                
                // Update quick replies based on sentiment
                updateQuickReplies(message);
            }, 1500 + Math.random() * 1000);
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            if (sender === 'user') {
                messageDiv.className = 'user-message p-4 mb-4 slide-up';
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2 justify-end">
                        <div class="text-right">
                            <p class="font-medium text-blue-100">You</p>
                            <p>${text}</p>
                            <p class="text-xs text-blue-200 mt-2">${timestamp}</p>
                        </div>
                        <div class="w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-user text-white text-sm"></i>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.className = 'ai-message p-4 mb-4 slide-up';
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <div class="w-8 h-8 bg-[var(--primary)] rounded-full flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div>
                            <p class="font-medium text-[var(--primary)]">MindMate</p>
                            <p>${text}</p>
                            <p class="text-xs text-gray-500 mt-2">${timestamp}</p>
                        </div>
                    </div>
                `;
            }
            
            elements.chatMessages.appendChild(messageDiv);
            elements.chatMessages.scrollTop = elements.chatMessages.scrollHeight;
            
            // Add to chat history
            state.chatHistory.push({ sender, text, timestamp });
        }

        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            // Crisis responses (should trigger overlay instead)
            if (detectCrisis(userMessage)) {
                return "I'm really concerned about what you're sharing. Let me connect you with immediate help.";
            }
            
            // Sentiment-based responses
            if (lowerMessage.includes('sad') || lowerMessage.includes('depressed') || lowerMessage.includes('unhappy')) {
                return "I'm sorry you're feeling this way. It takes courage to acknowledge these feelings. Would you like to talk more about what's making you feel sad?";
            }
            
            if (lowerMessage.includes('anxious') || lowerMessage.includes('nervous') || lowerMessage.includes('worried')) {
                return "Anxiety can feel overwhelming, but you're not alone in this. Let's break down what's making you feel anxious. Sometimes talking it through can help.";
            }
            
            if (lowerMessage.includes('stressed') || lowerMessage.includes('overwhelmed')) {
                return "Stress can really take a toll. Remember to breathe and take things one step at a time. What specifically is feeling overwhelming right now?";
            }
            
            if (lowerMessage.includes('happy') || lowerMessage.includes('great') || lowerMessage.includes('good')) {
                return "I'm so glad to hear that! It's wonderful when we have positive moments. Would you like to share what's making you feel good today?";
            }
            
            if (lowerMessage.includes('lonely') || lowerMessage.includes('alone')) {
                return "Feeling lonely can be really difficult, even when you're not physically alone. I'm here with you. What kind of connection are you missing right now?";
            }
            
            // Default empathetic responses
            const defaultResponses = [
                "Thank you for sharing that with me. I'm here to listen and support you.",
                "I appreciate you opening up about this. How has this been affecting you?",
                "That sounds challenging. Tell me more about what you're experiencing.",
                "I understand this might be difficult to talk about. Take your time.",
                "Your feelings are completely valid. I'm here whenever you're ready to share more."
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        function detectCrisis(message) {
            const crisisKeywords = [
                'suicide', 'kill myself', 'end my life', 'want to die', 
                'harm myself', 'hurt myself', 'not safe', 'unsafe'
            ];
            
            const lowerMessage = message.toLowerCase();
            return crisisKeywords.some(keyword => lowerMessage.includes(keyword));
        }

        function showCrisisMode() {
            elements.crisisOverlay.classList.remove('hidden');
        }

        function updateSentimentIndicator(message) {
            // Simple sentiment analysis (in a real app, this would come from the backend)
            const lowerMessage = message.toLowerCase();
            let sentiment = 'neutral';
            
            if (lowerMessage.includes('sad') || lowerMessage.includes('depressed') || 
                lowerMessage.includes('anxious') || lowerMessage.includes('stressed')) {
                sentiment = 'negative';
            } else if (lowerMessage.includes('happy') || lowerMessage.includes('good') || 
                       lowerMessage.includes('great') || lowerMessage.includes('awesome')) {
                sentiment = 'positive';
            }
            
            elements.sentimentIndicator.classList.remove('hidden');
            elements.sentimentValue.textContent = sentiment;
            
            // Color coding
            if (sentiment === 'positive') {
                elements.sentimentValue.className = 'font-medium text-green-600';
            } else if (sentiment === 'negative') {
                elements.sentimentValue.className = 'font-medium text-red-600';
            } else {
                elements.sentimentValue.className = 'font-medium text-gray-600';
            }
        }

        function updateQuickReplies(message) {
            // Update quick replies based on conversation context
            const lowerMessage = message.toLowerCase();
            let newReplies = [];
            
            if (lowerMessage.includes('sad') || lowerMessage.includes('depressed')) {
                newReplies = [
                    "What's making me feel this way",
                    "I've felt like this before",
                    "How can I feel better"
                ];
            } else if (lowerMessage.includes('anxious') || lowerMessage.includes('worried')) {
                newReplies = [
                    "What's causing my anxiety",
                    "Can we do a breathing exercise",
                    "I need help calming down"
                ];
            } else {
                newReplies = [
                    "I've been feeling stressed",
                    "I feel lonely sometimes", 
                    "I had a great day today!",
                    "I'm not sure how to handle this"
                ];
            }
            
            const container = elements.quickReplies.querySelector('.flex');
            container.innerHTML = '';
            
            newReplies.forEach(reply => {
                const button = document.createElement('button');
                button.className = 'quick-reply bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-3 py-2 rounded-full text-sm transition-colors';
                button.textContent = reply;
                button.addEventListener('click', () => {
                    elements.userInput.value = reply;
                    sendMessage();
                });
                container.appendChild(button);
            });
        }

        function startNewChat() {
            if (confirm('Start a new conversation? Your current chat will be saved.')) {
                elements.chatMessages.innerHTML = `
                    <div class="ai-message p-4 mb-4">
                        <div class="flex items-start space-x-2">
                            <div class="w-8 h-8 bg-[var(--primary)] rounded-full flex items-center justify-center">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div>
                                <p class="font-medium text-[var(--primary)]">MindMate</p>
                                <p>Hello there! I'm MindMate, your emotional support companion. I'm here to listen, understand, and help you through whatever you're feeling. You can talk to me about anything - no judgment, just support. How are you doing today?</p>
                                <p class="text-xs text-gray-500 mt-2">Just now</p>
                            </div>
                        </div>
                    </div>
                `;
                state.chatHistory = [];
                elements.sentimentIndicator.classList.add('hidden');
            }
        }

        function loadChatHistory() {
            // In a real app, this would load from localStorage or backend
            console.log('Loading chat history...');
        }

        // Visual Effects
        function createParticles() {
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random properties
                const size = Math.random() * 60 + 20;
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const delay = Math.random() * 5;
                const duration = Math.random() * 3 + 3;
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${left}%`;
                particle.style.top = `${top}%`;
                particle.style.animationDelay = `${delay}s`;
                particle.style.animationDuration = `${duration}s`;
                
                elements.particlesContainer.appendChild(particle);
            }
        }

        function initializeMoodChart() {
            const ctx = document.getElementById('mood-chart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Mood Level',
                        data: [3, 4, 2, 5, 4, 6, 7],
                        borderColor: '#4A90E2',
                        backgroundColor: 'rgba(74, 144, 226, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            min: 1,
                            max: 10,
                            ticks: {
                                callback: function(value) {
                                    const moods = ['', 'Very Low', 'Low', 'Okay', 'Good', 'Very Good', 'Excellent'];
                                    return moods[value] || '';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Load saved theme preference
        const savedTheme = localStorage.getItem('mindmate-theme');
        if (savedTheme === 'dark') {
            toggleTheme(); // Activate dark mode
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>